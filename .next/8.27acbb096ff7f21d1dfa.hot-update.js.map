{"version":3,"file":"8.27acbb096ff7f21d1dfa.hot-update.js","sources":["webpack:///pages/honorable-mention.js"],"sourcesContent":["import React from 'react';\nimport Waypoint from 'react-waypoint';\nimport dynamic from 'next/dynamic';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport api from '../api';\nimport withLayout from '../components/withLayout';\nimport { buildImageaArray, getGoogleMapsUrl, getWowClass } from '/components/helpers';\n\nconst Lightbox = dynamic(import('react-image-lightbox'));\n\nclass HoorableMention extends React.PureComponent {\n  state = {\n    page: 1,\n    loading: false,\n    hasMore: true,\n    photoIndex: 0,\n    isOpen: false,\n  }\n\n  static async getInitialProps() {\n    const posts = await api.posts().order('asc').orderby('title').perPage(10).category(3).embed();\n    return { posts };\n  }\n\n  loadMore = async () => {\n    if (this.state.loading || !this.state.hasMore) {\n      return;\n    }\n\n    this.setState({ loading: true});\n    const posts = await api.posts().perPage(10).page(this.state.page + 1).embed();\n    if (posts.length > 0) {\n      this.setState({\n        posts: this.state.posts.concat(posts),\n        page: this.state.page + 1\n      });\n    }\n    else {\n      this.setState({ hasMore: false });\n    }\n    this.setState({\n      loading: false\n    });\n  }\n\n  componentWillMount() {\n    this.setState({\n      posts: this.props.posts\n    });\n  };\n  \n  componentDidMount() {\n    if(typeof window !== 'undefined') {\n      window.WOW = require('wowjs');\n\n      window.wow = new WOW.WOW({\n        live: true\n      });\n      window.wow.init();\n    }\n  }\n\n  componentDidUpdate() {\n    if(typeof window !== 'undefined') {\n      window.wow.sync();\n    }\n  }\n\n  initializeLightbox = (post) => {\n    window.images = [];\n    window.images = buildImageaArray(post);\n    this.setState({ isOpen: true });\n  }\n\n  render() {\n    const { posts, photoIndex, isOpen } = this.state;\n    const title = 'Eat This Beef, bruh - Honorable Mention';\n\n    return (\n      <div>\n        <Head>\n          <title>{title}</title>\n          <meta property=\"og:title\" content={title} />\n          <meta property=\"og:image\" content={'/static/img/' + posts.map(post => (post.img))[0]} />\n          <meta name=\"twitter:title\" content={title} />\n          <meta name=\"twitter:image\" content={'/static/img/' + posts.map(post => (post.img))[0]} />\n        </Head>\n        <h1>Honorable Mention</h1>\n        <h3>The list continues. These burgers are fantastic and we'd love to return for another burgering sesh, but unfortunately we couldn't squeeze them into the top ten, because you know, there are only ten slots, and there are so many burgers in the Dallas burger-sphere. We want them all to be in the top ten, but god damnit we have to show some restraint. </h3>\n        {isOpen && (\n          <Lightbox\n            mainSrc={window.images[photoIndex].src}\n            nextSrc={window.images[(photoIndex + 1) % window.images.length].src}\n            prevSrc={window.images[(photoIndex + window.images.length - 1) % window.images.length].src}\n            imageTitle={window.images[photoIndex].title}\n            animationOnKeyInput={'true'}\n            onCloseRequest={() => this.setState({ isOpen: false })}\n            onMovePrevRequest={() =>\n              this.setState({\n                photoIndex: (photoIndex + window.images.length - 1) % window.images.length,\n              })\n            }\n            onMoveNextRequest={() =>\n              this.setState({\n                photoIndex: (photoIndex + 1) % window.images.length,\n              })\n            }\n          />\n        )}\n        <section className={'restaurant-list'}>\n          {\n            posts.map(post => (\n              <section key={post.id} className={'restaurant' + getWowClass(this.window)} data-wow-duration=\".5s\" data-wow-offset=\"10\">\n                <img src={'/static/img/' + getCategoryIcon(post.section) + '.png'} className={'icon'}/>\n                <Link\n                  href={{\n                    pathname: '/restaurant',\n                    query: {\n                      slug: post.slug,\n                    },\n                  }}\n                  as={`/restaurant/${post.slug}`}\n                >\n                  <a>\n                    <h2 dangerouslySetInnerHTML={{ __html: post.title.rendered }} />\n                  </a>\n                </Link>\n                <div className={'address'}>\n                  <a href={getGoogleMapsUrl(post)} target=\"_blank\">{post.addressstreet + ', ' + post.addresscity + ', ' + post.addressstate}</a>\n                </div>\n                <button className={'img-thumb'} onClick={() => this.initializeLightbox(post)}>\n                  <img src={'/static/img/' +  post.imgthumb}/>\n                </button>\n                <div className={'copy'}>\n                  <div dangerouslySetInnerHTML={{ __html: post.content.rendered }} />                \n                </div>\n                <div className={'date'}>Masticated in: {dateDisplay(post.date)}</div>\n              </section>\n            ))\n          }\n        </section>\n        {this.state.hasMore && <Waypoint key={this.state.page} onEnter={this.loadMore} />}\n        {this.state.loading && <div className={'loading-more'}><img src={'/static/img/logo-small.png'} /> </div>}\n      </div>\n    );\n  }\n}\n\nexport default withLayout(HoorableMention);\n\n\n\n// WEBPACK FOOTER //\n// pages/honorable-mention.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAKA;AAAA;AAAA;AACA;AANA;AAAA;AACA;AADA;AAMA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AADA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AA2CA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AA3BA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAQA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AADA;AADA;AAKA;AAAA;AAEA;AADA;AADA;AAZA;AAAA;AAAA;AAAA;AAAA;AAmBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAFA;AAMA;AAPA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAzBA;AA8BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;AA7HA;AACA;;AADA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AAZA;AACA;AAyIA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}